import streamlit as st

from agents.dm import DungeonMaster
from components.bubble import bubble
from game.turn_manager import TurnManager

ss = st.session_state

st.title("Dungeons and Dragons ♾️")

initial_prompt = """\
You are in a tavern. You see a gathering of shady characters clustered \
around a few tables, sipping ales and glancing nervously at the entrance \
with anticipation. 

You have been summoned to this tavern by a mysterious patron named Steve. \

Steve is sitting alone at a corner table near the hearth, wearing a \
voluminous cloak with a hood pulled up. He motions for you to join him.

How do you proceed?"""

if "messages" not in ss:
    ss["messages"] = [("bot", initial_prompt)]

if "dm" not in ss:
    ss["dm"] = DungeonMaster(initial_prompt)

if "turn_manager" not in ss:
    ss["turn_manager"] = TurnManager(["Spud", "Kale"])

avatars = {
    "Spud": "https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2F64.media.tumblr.com%2Fe27286a585a5a5dd947f375eb2015855%2Ftumblr_pbhypwAXAh1riuqaho2_1280.jpg&f=1&nofb=1&ipt=db8edcd506c290be1e0875d2753171db077eb4e4b39994496bfb94f11a8d38d2&ipo=images",
    "Kale": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAYABgAAD/4QCMRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABgAAAAAQAAAGAAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAANqgAwAEAAAAAQAAANgAAAAA/+EJIWh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8APD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0idyI/PgD/wAARCADYANoDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLD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",
}


for entity, message in ss.messages:
    if entity == "bot":
        bubble.bot(message)
    else:
        bubble.user(message, src=avatars[entity])

*_, (prev_entity, _) = ss.messages

if player_or_players := ss.turn_manager.who_can_take_a_turn():
    with st.form(key="input", clear_on_submit=True):
        player = st.selectbox("Player", player_or_players, key="player")
        input_ = st.text_area("This is ", value="", key="player_input")

        def submit():
            if ss.player_input:
                st.session_state["messages"].append((ss.player, ss.player_input))
                ss.turn_manager.take_turn(ss.player)

        def skip_turn():
            ss.turn_manager.take_turn(ss.player)

        st.form_submit_button(label="Make your mark on the universe.", on_click=submit)
        st.form_submit_button(label="Skip turn.", on_click=skip_turn)
else:
    with st.spinner("Generating AI output..."):
        human_input = st.session_state.player + ": " + st.session_state.player_input
        ai_result = st.session_state.dm.next_conversational_turn(human_input)
        st.session_state["messages"].append(("bot", ai_result))
        ss.turn_manager.reset()
        st.experimental_rerun()
